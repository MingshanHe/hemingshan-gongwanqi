<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>致我最爱的你</title>
    <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
    
    <style>
        /* --- 全局样式 --- */
        body {
            background-color: #000;
            color: #fff;
            font-family: "Microsoft YaHei", sans-serif;
            margin: 0;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* --- 背景星空动画 (可选) --- */
        .bg-stars {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
        }

        /* --- 3D相册容器 --- */
        #canvas-container {
            margin-top: 50px;
            width: 100%;
            max-width: 600px;
            height: 600px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* 隐藏原始图片列表，只用于生成 Canvas */
        #tags { display: none; }

        /* --- 计时器样式 --- */
        .timer-box {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(5px);
            width: 80%;
            max-width: 600px;
        }
        .timer-box h2 {
            font-weight: 300;
            font-size: 1.2rem;
            color: #ff99cc;
            margin-bottom: 10px;
        }
        #timer {
            font-size: 1.5rem;
            font-weight: bold;
            letter-spacing: 2px;
        }

        /* --- 留言板样式 --- */
        .comment-section {
            width: 80%;
            max-width: 700px;
            margin: 30px 0 50px 0;
            padding: 20px;
            background: #fff;
            border-radius: 10px;
            color: #333;
        }
        .comment-title {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            font-size: 1.2rem;
        }
    </style>
</head>
<body>

    <div class="bg-stars"></div>

    <div id="canvas-container">
        <canvas width="600" height="600" id="myCanvas">
            <p>你的浏览器不支持 Canvas，请升级浏览器。</p>
        </canvas>
    </div>

    <div id="tags">
        <ul>
            <li><a href="javascript:void(0)"><img src="images/1.jpg" width="100" height="100"></a></li>
            <li><a href="javascript:void(0)"><img src="images/2.jpg" width="100" height="100"></a></li>
            <li><a href="javascript:void(0)"><img src="images/3.png" width="100" height="100"></a></li>
            <li><a href="javascript:void(0)"><img src="images/4.jpg" width="100" height="100"></a></li>
            <li><a href="javascript:void(0)"><img src="images/5.jpg" width="100" height="100"></a></li>
            <li><a href="javascript:void(0)"><img src="images/6.jpg" width="100" height="100"></a></li>
            <li><a href="javascript:void(0)"><img src="images/7.jpg" width="100" height="100"></a></li>
            <li><a href="javascript:void(0)"><img src="images/8.jpg" width="100" height="100"></a></li>
            <li><a href="javascript:void(0)"><img src="images/9.jpg" width="100" height="100"></a></li>
            <li><a href="javascript:void(0)"><img src="images/10.jpg" width="100" height="100"></a></li>
        </ul>
    </div>

    <div class="timer-box">
        <h2>我们预计相爱已经</h2>
        <div id="timer">计算中...</div>
    </div>

    <div class="comment-section">
        <h3 class="comment-title">写下我们的回忆</h3>
        <div id="vcomments"></div>
    </div>

    <script src="https://www.goat1000.com/tagcanvas.min.js" type="text/javascript"></script>

    <script type="text/javascript">
        // --- 配置区域 (请修改这里) --- //
        
        // 1. 设置表白成功的日期 (格式：年, 月-1, 日, 时, 分, 秒)
        // 注意：月份是从0开始的，所以5月要写4，1月要写0
        const startDate = new Date(2026, 1, 30, 21, 30, 0); 

        // 2. 留言板配置 (需要去 leancloud.cn 注册获取)
        // 暂时留空，不填 AppId 不会报错，只是不能留言
        const valineConfig = {
            appId: '', // 你的 App ID
            appKey: '' // 你的 App Key
        };

        // ----------------------------- //

        // --- 逻辑代码 --- //

        // 1. 启动 3D 相册
        window.onload = function() {
            try {
                TagCanvas.Start('myCanvas', 'tags', {
                    textColour: null,
                    dragControl: true,    // 允许拖动
                    decel: 0.95,          // 拖动后的惯性
                    maxSpeed: 0.05,       // 最大旋转速度
                    initial: [-0.08, 0],  // 初始旋转方向
                    imageScale: null,     // 图片保持原始比例
                    outlineMethod: 'none',// 无边框
                    depth: 0.8,           // 深度感
                    wheelZoom: true,      // 允许滚轮缩放 (放大缩小)
                    minTags: 0,
                    imageMode: 'both'     // 既显示图片也支持文字(如果有)
                });
            } catch(e) {
                document.getElementById('canvas-container').style.display = 'none';
            }
        };

        // 2. 计时器逻辑
        function updateTimer() {
            const now = new Date();
            const diff = now - startDate;

            if (diff < 0) {
                document.getElementById("timer").innerHTML = "未来可期";
                return;
            }

            const years = Math.floor(diff / (1000 * 60 * 60 * 24 * 365));
            const days = Math.floor((diff % (1000 * 60 * 60 * 24 * 365)) / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            document.getElementById("timer").innerHTML = 
                `${years}年 ${days}天 ${hours}小时 ${minutes}分 ${seconds}秒`;
        }
        setInterval(updateTimer, 1000);
        updateTimer();

        // 3. 启动留言板
        // if (valineConfig.appId) {
        //     new Valine({
        //         el: '#vcomments',
        //         appId: valineConfig.appId,
        //         appKey: valineConfig.appKey,
        //         placeholder: '亲爱的，在这里留下你想说的话吧...',
        //         avatar: 'wavatar' // 头像风格
        //     });
        // } else {
        //     document.getElementById('vcomments').innerHTML = '<p style="text-align:center; color:#999;">请配置 LeanCloud AppID 以开启留言功能</p>';
        // }
    </script>
</body>
</html>